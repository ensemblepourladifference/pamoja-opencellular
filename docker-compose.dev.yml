version: '3.0'

# Expose ports locally for dev
services:
  freeswitch:
    image: ensemblepourladifference/freeswitch:latest
    build:
      context: packages/freeswitch
    restart: unless-stopped
    ports:
      - '8021:8021/tcp'
      - '5060:5060/tcp'
      - '5060:5060/udp'
      - '5080:5080/tcp'
      - '5080:5080/udp'
      - '5061:5061/tcp'
      - '5061:5061/udp'
      - '5081:5081/tcp'
      - '5081:5081/udp'
      - '7443:7443/tcp'
      - '5070:5070/tcp'
      - '5070:5070/udp'
      - '64535-65535:64535-65535/udp'
      - '16384-32768:16384-32768/udp'
  mongo:
    ports:
      - '27017:27017'
    volumes:
      - './data/mongo:/data/db'
  osmo-msc:
    image: ensemblepourladifference/osmo-msc:latest
    build:
      context: packages/osmo-msc-latest
      dockerfile: ./Dockerfile
    restart: unless-stopped
  osmo-mgw:
    image: ensemblepourladifference/osmo-mgw:latest
    build:
      context: packages/osmo-mgw-latest
      dockerfile: ./Dockerfile
    restart: unless-stopped
  osmo-hlr:
    image: ensemblepourladifference/osmo-hlr:latest
    build:
      context: packages/osmo-hlr-latest
      dockerfile: ./Dockerfile
    restart: unless-stopped
  osmo-stp:
    image: ensemblepourladifference/osmo-stp:latest
    build:
      context: packages/osmo-stp-latest
      dockerfile: ./Dockerfile
    restart: unless-stopped
