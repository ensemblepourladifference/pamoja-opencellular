<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>libosmocore: Osmocom timers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libosmocore
   &#160;<span id="projectnumber">0.9.6.97-437e</span>
   </div>
   <div id="projectbrief">Osmocom core library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__timer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Osmocom timers</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:timer_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html">timer.h</a></td></tr>
<tr class="memdesc:timer_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Osmocom timer handling routines. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:timer__compat_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__compat_8h.html">timer_compat.h</a></td></tr>
<tr class="memdesc:timer__compat_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compatibility header with some helpers. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:timer_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8c.html">timer.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:timer__gettimeofday_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer__gettimeofday_8c.html">timer_gettimeofday.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmo__timer__list.html">osmo_timer_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure representing a single instance of a timer.  <a href="structosmo__timer__list.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga7a6810e8127f008279242fba997a26a3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7a6810e8127f008279242fba997a26a3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>timerisset</b>(tvp)&#160;&#160;&#160;((tvp)-&gt;tv_sec || (tvp)-&gt;tv_usec)</td></tr>
<tr class="separator:ga7a6810e8127f008279242fba997a26a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab95d90a9147b65d4ec1fab6bd2db6d1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab95d90a9147b65d4ec1fab6bd2db6d1f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>timerclear</b>(tvp)&#160;&#160;&#160;((tvp)-&gt;tv_sec = (tvp)-&gt;tv_usec = 0)</td></tr>
<tr class="separator:gab95d90a9147b65d4ec1fab6bd2db6d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9740b405322c5d2a83d93426df96f79a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>timercmp</b>(a, b, CMP)</td></tr>
<tr class="separator:ga9740b405322c5d2a83d93426df96f79a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c04f2eb10391cb3ca3b47882d23d2de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>timeradd</b>(a, b, result)</td></tr>
<tr class="separator:ga7c04f2eb10391cb3ca3b47882d23d2de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b18f762e42417ce5d86090331d3e4eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>timersub</b>(a, b, result)</td></tr>
<tr class="separator:ga8b18f762e42417ce5d86090331d3e4eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8eb1bef581081eb105265e56b15945fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga8eb1bef581081eb105265e56b15945fa">osmo_timer_add</a> (struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *timer)</td></tr>
<tr class="memdesc:ga8eb1bef581081eb105265e56b15945fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a new timer to the timer management  <a href="#ga8eb1bef581081eb105265e56b15945fa">More...</a><br/></td></tr>
<tr class="separator:ga8eb1bef581081eb105265e56b15945fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93a296b92775fc08c60eb154a3389e5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga93a296b92775fc08c60eb154a3389e5b">osmo_timer_schedule</a> (struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *timer, int seconds, int microseconds)</td></tr>
<tr class="memdesc:ga93a296b92775fc08c60eb154a3389e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">schedule a timer at a given future relative time  <a href="#ga93a296b92775fc08c60eb154a3389e5b">More...</a><br/></td></tr>
<tr class="separator:ga93a296b92775fc08c60eb154a3389e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1aa977a3eb2d5b5447b8acd32002b6cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga1aa977a3eb2d5b5447b8acd32002b6cf">osmo_timer_del</a> (struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *timer)</td></tr>
<tr class="memdesc:ga1aa977a3eb2d5b5447b8acd32002b6cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete a timer from timer management  <a href="#ga1aa977a3eb2d5b5447b8acd32002b6cf">More...</a><br/></td></tr>
<tr class="separator:ga1aa977a3eb2d5b5447b8acd32002b6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1600fa800363d80d195ad8122089b3d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga1600fa800363d80d195ad8122089b3d6">osmo_timer_pending</a> (struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *timer)</td></tr>
<tr class="memdesc:ga1600fa800363d80d195ad8122089b3d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if given timer is still pending  <a href="#ga1600fa800363d80d195ad8122089b3d6">More...</a><br/></td></tr>
<tr class="separator:ga1600fa800363d80d195ad8122089b3d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e6d99128b6f5e318df78a20c022c068"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga0e6d99128b6f5e318df78a20c022c068">osmo_timer_remaining</a> (const struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *timer, const struct timeval *now, struct timeval *remaining)</td></tr>
<tr class="memdesc:ga0e6d99128b6f5e318df78a20c022c068"><td class="mdescLeft">&#160;</td><td class="mdescRight">compute the remaining time of a timer  <a href="#ga0e6d99128b6f5e318df78a20c022c068">More...</a><br/></td></tr>
<tr class="separator:ga0e6d99128b6f5e318df78a20c022c068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5766d10a219da5e6ab283fede26d2e40"><td class="memItemLeft" align="right" valign="top">struct timeval *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga5766d10a219da5e6ab283fede26d2e40">osmo_timers_nearest</a> (void)</td></tr>
<tr class="memdesc:ga5766d10a219da5e6ab283fede26d2e40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine time between now and the nearest timer.  <a href="#ga5766d10a219da5e6ab283fede26d2e40">More...</a><br/></td></tr>
<tr class="separator:ga5766d10a219da5e6ab283fede26d2e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga420626edb507e81884f9842572a83467"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga420626edb507e81884f9842572a83467"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga420626edb507e81884f9842572a83467">osmo_timers_prepare</a> (void)</td></tr>
<tr class="memdesc:ga420626edb507e81884f9842572a83467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the nearest time and update nearest_p. <br/></td></tr>
<tr class="separator:ga420626edb507e81884f9842572a83467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8d555ef1c2e59ed54f0e12e2ee1f41c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf8d555ef1c2e59ed54f0e12e2ee1f41c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#gaf8d555ef1c2e59ed54f0e12e2ee1f41c">osmo_timers_update</a> (void)</td></tr>
<tr class="memdesc:gaf8d555ef1c2e59ed54f0e12e2ee1f41c"><td class="mdescLeft">&#160;</td><td class="mdescRight">fire all timers... and remove them <br/></td></tr>
<tr class="separator:gaf8d555ef1c2e59ed54f0e12e2ee1f41c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gada843afa93f84337776c8efc1b539fe3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#gada843afa93f84337776c8efc1b539fe3">osmo_timers_check</a> (void)</td></tr>
<tr class="memdesc:gada843afa93f84337776c8efc1b539fe3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check how many timers we have in the system.  <a href="#gada843afa93f84337776c8efc1b539fe3">More...</a><br/></td></tr>
<tr class="separator:gada843afa93f84337776c8efc1b539fe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c559c124f4720d0a54af5f206681049"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8c559c124f4720d0a54af5f206681049"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#ga8c559c124f4720d0a54af5f206681049">osmo_gettimeofday</a> (struct timeval *tv, struct timezone *tz)</td></tr>
<tr class="memdesc:ga8c559c124f4720d0a54af5f206681049"><td class="mdescLeft">&#160;</td><td class="mdescRight">shim around gettimeofday to be able to set the time manually. To override, set osmo_gettimeofday_override == true and set the desired current time in osmo_gettimeofday_override_time. <br/></td></tr>
<tr class="separator:ga8c559c124f4720d0a54af5f206681049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafcbae57ab2c2635d0dd248ec3011bd1c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafcbae57ab2c2635d0dd248ec3011bd1c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#gafcbae57ab2c2635d0dd248ec3011bd1c">osmo_gettimeofday_override_add</a> (time_t secs, suseconds_t usecs)</td></tr>
<tr class="memdesc:gafcbae57ab2c2635d0dd248ec3011bd1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">convenience function to advance the fake time. Add the given values to osmo_gettimeofday_override_time. <br/></td></tr>
<tr class="separator:gafcbae57ab2c2635d0dd248ec3011bd1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga372d9a79777dbdec72e7a19476111b63"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga372d9a79777dbdec72e7a19476111b63"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>__add_timer</b> (struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *timer)</td></tr>
<tr class="separator:ga372d9a79777dbdec72e7a19476111b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c625e3072119d895980fefcd207c14d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0c625e3072119d895980fefcd207c14d"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>update_nearest</b> (struct timeval *cand, struct timeval *current)</td></tr>
<tr class="separator:ga0c625e3072119d895980fefcd207c14d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gac10c80c84b5f61c509d36f59de66e42f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#gac10c80c84b5f61c509d36f59de66e42f">osmo_gettimeofday_override</a></td></tr>
<tr class="separator:gac10c80c84b5f61c509d36f59de66e42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0b4877db25000054ec9226dc39a7a79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac0b4877db25000054ec9226dc39a7a79"></a>
struct timeval&#160;</td><td class="memItemRight" valign="bottom"><b>osmo_gettimeofday_override_time</b></td></tr>
<tr class="separator:gac0b4877db25000054ec9226dc39a7a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6cbefe2513a00c934809c76409ec2045"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6cbefe2513a00c934809c76409ec2045"></a>
static struct timeval&#160;</td><td class="memItemRight" valign="bottom"><b>nearest</b></td></tr>
<tr class="separator:ga6cbefe2513a00c934809c76409ec2045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga697d86f21ce2ed8dd39a36660fc87c4a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga697d86f21ce2ed8dd39a36660fc87c4a"></a>
static struct timeval *&#160;</td><td class="memItemRight" valign="bottom"><b>nearest_p</b></td></tr>
<tr class="separator:ga697d86f21ce2ed8dd39a36660fc87c4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63e3be53dc02c8dbcb0bb5366e56e68e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga63e3be53dc02c8dbcb0bb5366e56e68e"></a>
static struct <a class="el" href="structrb__root.html">rb_root</a>&#160;</td><td class="memItemRight" valign="bottom"><b>timer_root</b> = RB_ROOT</td></tr>
<tr class="separator:ga63e3be53dc02c8dbcb0bb5366e56e68e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac10c80c84b5f61c509d36f59de66e42f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__timer.html#gac10c80c84b5f61c509d36f59de66e42f">osmo_gettimeofday_override</a> = false</td></tr>
<tr class="separator:gac10c80c84b5f61c509d36f59de66e42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0b4877db25000054ec9226dc39a7a79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac0b4877db25000054ec9226dc39a7a79"></a>
struct timeval&#160;</td><td class="memItemRight" valign="bottom"><b>osmo_gettimeofday_override_time</b> = { 23, 424242 }</td></tr>
<tr class="separator:gac0b4877db25000054ec9226dc39a7a79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga7c04f2eb10391cb3ca3b47882d23d2de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define timeradd</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">result&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                                          \</div>
<div class="line">    (result)-&gt;tv_sec = (a)-&gt;tv_sec + (b)-&gt;tv_sec;                             \</div>
<div class="line">    (result)-&gt;tv_usec = (a)-&gt;tv_usec + (b)-&gt;tv_usec;                          \</div>
<div class="line">    if ((result)-&gt;tv_usec &gt;= 1000000)                                         \</div>
<div class="line">      {                                                                       \</div>
<div class="line">        ++(result)-&gt;tv_sec;                                                   \</div>
<div class="line">        (result)-&gt;tv_usec -= 1000000;                                         \</div>
<div class="line">      }                                                                       \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga9740b405322c5d2a83d93426df96f79a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define timercmp</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CMP&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(((a)-&gt;tv_sec == (b)-&gt;tv_sec) ?                                               \</div>
<div class="line">   ((a)-&gt;tv_usec CMP (b)-&gt;tv_usec) :                                          \</div>
<div class="line">   ((a)-&gt;tv_sec CMP (b)-&gt;tv_sec))</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga8b18f762e42417ce5d86090331d3e4eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define timersub</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">result&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                                                          \</div>
<div class="line">    (result)-&gt;tv_sec = (a)-&gt;tv_sec - (b)-&gt;tv_sec;                             \</div>
<div class="line">    (result)-&gt;tv_usec = (a)-&gt;tv_usec - (b)-&gt;tv_usec;                          \</div>
<div class="line">    if ((result)-&gt;tv_usec &lt; 0) {                                              \</div>
<div class="line">      --(result)-&gt;tv_sec;                                                     \</div>
<div class="line">      (result)-&gt;tv_usec += 1000000;                                           \</div>
<div class="line">    }                                                                         \</div>
<div class="line">  } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8eb1bef581081eb105265e56b15945fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osmo_timer_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>add a new timer to the timer management </p>
<p>timer management</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timer</td><td>the timer that should be added </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="structosmo__timer__list.html#a6f1145859e880c7ec66059cdb3654c7e">osmo_timer_list::active</a>, <a class="el" href="group__linuxlist.html#gaf2e921d75d05e3a076227eda0bbd178e">INIT_LLIST_HEAD</a>, <a class="el" href="structosmo__timer__list.html#a3d224b460d85ec877b42f3a9dc66686a">osmo_timer_list::list</a>, and <a class="el" href="group__timer.html#ga1aa977a3eb2d5b5447b8acd32002b6cf">osmo_timer_del()</a>.</p>

<p>Referenced by <a class="el" href="group__timer.html#ga93a296b92775fc08c60eb154a3389e5b">osmo_timer_schedule()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1aa977a3eb2d5b5447b8acd32002b6cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osmo_timer_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>delete a timer from timer management </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timer</td><td>the to-be-deleted timer</td></tr>
  </table>
  </dd>
</dl>
<p>This function can be used to delete a previously added/scheduled timer from the timer management code. </p>

<p>References <a class="el" href="structosmo__timer__list.html#a6f1145859e880c7ec66059cdb3654c7e">osmo_timer_list::active</a>, <a class="el" href="structosmo__timer__list.html#a3d224b460d85ec877b42f3a9dc66686a">osmo_timer_list::list</a>, <a class="el" href="group__linuxlist.html#ga34cd312e2bd3c6a9d6c2ee9f0edd614d">llist_del_init()</a>, <a class="el" href="group__linuxlist.html#gac458d7d13167c67bc3591038ef23405d">llist_empty()</a>, and <a class="el" href="structosmo__timer__list.html#aab2a7671fc03859801d79cb02210d93a">osmo_timer_list::node</a>.</p>

<p>Referenced by <a class="el" href="group__fsm.html#ga7608be014cba6f4310e880481b309a94">_osmo_fsm_inst_state_chg()</a>, <a class="el" href="group__fsm.html#ga4cd3ac472cde5e97f156d398863e2081">osmo_fsm_inst_free()</a>, <a class="el" href="group__timer.html#ga8eb1bef581081eb105265e56b15945fa">osmo_timer_add()</a>, and <a class="el" href="group__timer.html#gaf8d555ef1c2e59ed54f0e12e2ee1f41c">osmo_timers_update()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1600fa800363d80d195ad8122089b3d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osmo_timer_pending </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check if given timer is still pending </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timer</td><td>the to-be-checked timer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if pending, 0 otherwise</dd></dl>
<p>This function can be used to determine whether a given timer has alredy expired (returns 0) or is still pending (returns 1) </p>

<p>References <a class="el" href="structosmo__timer__list.html#a6f1145859e880c7ec66059cdb3654c7e">osmo_timer_list::active</a>.</p>

</div>
</div>
<a class="anchor" id="ga0e6d99128b6f5e318df78a20c022c068"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osmo_timer_remaining </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>remaining</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>compute the remaining time of a timer </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timer</td><td>the to-be-checked timer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">now</td><td>the current time (NULL if not known) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">remaining</td><td>remaining time until timer fires </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if timer has not expired yet, -1 if it has</dd></dl>
<p>This function can be used to determine the amount of time remaining until the expiration of the timer. </p>

<p>References <a class="el" href="group__timer.html#ga8c559c124f4720d0a54af5f206681049">osmo_gettimeofday()</a>, and <a class="el" href="structosmo__timer__list.html#ab260b34f66b5a12a0059eda6c729379b">osmo_timer_list::timeout</a>.</p>

</div>
</div>
<a class="anchor" id="ga93a296b92775fc08c60eb154a3389e5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osmo_timer_schedule </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> *&#160;</td>
          <td class="paramname"><em>timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>microseconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>schedule a timer at a given future relative time </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timer</td><td>the to-be-added timer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">seconds</td><td>number of seconds from now </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">microseconds</td><td>number of microseconds from now</td></tr>
  </table>
  </dd>
</dl>
<p>This function can be used to (re-)schedule a given timer at a specified number of seconds+microseconds in the future. It will internally add it to the timer management data structures, thus <a class="el" href="group__timer.html#ga8eb1bef581081eb105265e56b15945fa" title="add a new timer to the timer management ">osmo_timer_add()</a> is automatically called. </p>

<p>References <a class="el" href="group__timer.html#ga8c559c124f4720d0a54af5f206681049">osmo_gettimeofday()</a>, <a class="el" href="group__timer.html#ga8eb1bef581081eb105265e56b15945fa">osmo_timer_add()</a>, and <a class="el" href="structosmo__timer__list.html#ab260b34f66b5a12a0059eda6c729379b">osmo_timer_list::timeout</a>.</p>

<p>Referenced by <a class="el" href="group__fsm.html#ga7608be014cba6f4310e880481b309a94">_osmo_fsm_inst_state_chg()</a>, and <a class="el" href="group__rate__ctr.html#ga9bfe8ec87ccaabd9f1fdddef5f36cbfa">rate_ctr_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gada843afa93f84337776c8efc1b539fe3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osmo_timers_check </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check how many timers we have in the system. </p>
<dl class="section return"><dt>Returns</dt><dd>number of <a class="el" href="structosmo__timer__list.html">osmo_timer_list</a> registered </dd></dl>

</div>
</div>
<a class="anchor" id="ga5766d10a219da5e6ab283fede26d2e40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval * osmo_timers_nearest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine time between now and the nearest timer. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to timeval of nearest timer, NULL if there is none</dd></dl>
<p>if we have a nearest time return the delta between the current time and the time of the nearest timer. If the nearest timer timed out return NULL and then we will dispatch everything after the select </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="gac10c80c84b5f61c509d36f59de66e42f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool osmo_gettimeofday_override = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>timer override </p>

<p>Referenced by <a class="el" href="group__timer.html#ga8c559c124f4720d0a54af5f206681049">osmo_gettimeofday()</a>.</p>

</div>
</div>
<a class="anchor" id="gac10c80c84b5f61c509d36f59de66e42f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool osmo_gettimeofday_override</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>timer override </p>

<p>Referenced by <a class="el" href="group__timer.html#ga8c559c124f4720d0a54af5f206681049">osmo_gettimeofday()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Aug 7 2017 23:48:32 for libosmocore by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
